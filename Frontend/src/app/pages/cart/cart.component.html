<div class="p-m-4">
  <h2>Your Cart</h2>

  <p-table [value]="items" *ngIf="items.length > 0">
    <ng-template pTemplate="header">
      <tr>
        <th>Product</th>
        <th>Price</th>
        <th>Qty</th>
        <th>Total</th>
        <th></th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-item>
      <tr>
        <td>{{ item.product.name }}</td>
        <td>{{ item.product.price | currency }}</td>
        <td>
          <input
            type="number"
            min="1"
            [(ngModel)]="item.quantity"
            (ngModelChange)="updateQty(item.product.id, $event)"
            style="width: 60px"
          />
        </td>
        <td>{{ item.product.price * item.quantity | currency }}</td>
        <td>
          <button
            pButton
            type="button"
            icon="pi pi-trash"
            class="p-button-danger"
            (click)="remove(item.product.id)"
          ></button>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <div *ngIf="items.length === 0" class="p-mt-4">
    <p>Your cart is empty.</p>
  </div>

  <div *ngIf="items.length > 0" class="p-mt-4">
    <h3>Total: {{ total | currency }}</h3>

    <button
      pButton
      type="button"
      label="Checkout"
      class="p-ml-2"
      (click)="checkout()"
    ></button>
  </div>
</div>

<p-toast></p-toast>
